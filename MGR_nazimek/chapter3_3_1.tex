

\subsection{Aplikacja serwerowa}

Przedstawimy teraz architekturê czêœci serwerowej, komponenty, z których siê
sk³ada oraz wykorzystywane technologie.
\newline
Aby zrozumieæ projekt ca³ego systemu, wprowadŸmy pewne pojêcia w naszym
systemie. Wynikaj¹ z nich dalsze rozwi¹zania: 
\begin{itemize}
  \item \emph{Ankieta} - treœæ, dla której istniej¹ dostêpne zdefiniowane
  odpowiedzi.
 \item \emph{OdpowiedŸ} - jedna z mo¿liwoœci wyboru dostêpnych dla danej ankiety
  \item \emph{U¿ytkownik} - konto, z którym zwi¹zane s¹ uprawnienia i~udzielone
  w ankietach odpowiedzi. Jeden u¿ytkownik mo¿e udzieliæ wielu odpowiedzi w
  trakcie dzia³ania ca³ego systemu.
\end{itemize}


Aplikacja serwerowa zbudowana zosta³a w oparciu o model trójwarstwowy, z
podwójnym dostêpem (widokiem) do danych. 



\begin{figure}[htb]
    \begin{center}
    \includegraphics[angle=0,scale=0.7]{img/diag2.png}
    \end{center}
    \caption{Architektura czêœci serwerowej szablonu integracyjnego}
    \label{fig:pool_arch2}
\end{figure}

Przedstawmy teraz poszczególne warstwy systemu wraz z przyjêtymi w nich
za³o¿eniami.

\paragraph{Serwer}
Aplikacja serwerowa jest uruchamiana na kontenerze Apache Tomcat 6.0.

\paragraph{Baza danych}
W oparciu o przedstawione wczeœniej za³o¿enia stworzony zosta³ schemat
bazy danych widoczny na rysunku \ref{fig:pool_db}.


\begin{figure}[htb]
    \begin{center}
    \includegraphics[angle=0,scale=0.7]{img/pool_schema_o.png}
    \end{center}
    \caption{Schemat koncepcyjny bazy danych czêœci serwerowej szablonu
    integracyjnego}
    \label{fig:pool_db}
\end{figure}

\begin{figure}[htb]
    \begin{center}
    \includegraphics[angle=0,scale=0.7]{img/pool_schema.png}
    \end{center}
    \caption{Schemat fizyczny bazy danych czêœci serwerowej szablonu
    integracyjnego}
    \label{fig:pool_db2}
\end{figure}


Schemat koncepcyjny(rysunek \ref{fig:pool_db}) jest tylko przyk³adem. Stanowi
podstawê do prezentacji mo¿liwoœci szkieltu Kuix. Konstrukcja tego schematu mo¿e
byæ dowolna. Kluczowym zagadnieniem jest transformacja danych zawartych w systemie
na XML reprezentuj¹cy interfejs widoczny na urz¹dzeniu. Kuix jest na
tyle elastyczny, ¿e mo¿liwe jest pod³¹czenie do niego dowolnego Ÿród³a danych
generuj¹cego XML (w szczególnoœci danych nie musi dostarczaæ baza relacyjna -
mo¿na na przyk³ad pod³¹czyæ bazê obiektow¹ Lotus Notes).
\newline
Na postawie schematu koncepcyjnego stworzony zosta³ schemat fizyczny bazy
danych widoczny na rysunku \ref{fig:pool_db2}.
\newline


\index{Hibernate}
\paragraph{Hibernate}
Dostêp do danych realizowany jest za pomoc¹ mapowania relacyjno-obiektowego
Hibernate. Teoretycznie pozwala to, a na pewno znacznie u³atwia, ewentualn¹
zmianê dostawcy bazy danych. Dodatkowo uwalnia nas z koniecznoœci rêcznego
pisania zapytañ SQL. 

\index{Spring}
\paragraph{Spring Framework}
Spring jest zestawem narzêdzi u³atwiaj¹cym tworzenie aplikacji. Pozwala on
miêdzy innymi na deklaratywne zarz¹dzanie transakcjami, zarz¹dzanie
cyklem ¿ycia obiektów oraz zwalnia programistê z koniecznoœci pisania
 czêsto powtarzanego kodu przez dostarczenie odpowiednich szablonów. Dodatkowo,
 wymusza on pewien model programowania i~sprawia, ¿e pisane aplikacje s¹
 bardziej przejrzyste i~³atwiejsze w utrzymaniu. Jak ju¿ zosta³o wspomniane,
 aplikacja serwerowa jest aplikacj¹ typu Web, z któr¹ to framework Spring
 doskonale siê integruje.
 
\index{JSF}
\paragraph{Apache Myfaces} 
Myfaces jest implementacj¹ specyfikacji Java Server Faces pozwalaj¹c¹ na
wygodne tworzenie widoku aplikacji. W naszym przypadku interfejsem bêdzie
dynamicznie generowana strona WWW, choæ specyfikacja JSF nie wprowadza takiego
ograniczenia. Warstwa ta bêdzie s³u¿y³a do administrowania systemem,
przegl¹dania podjêtych decyzji i~zarz¹dzania ankietami i~u¿ytkownikami.
\index{webserwisy}
\index{Apache Axis}
\paragraph{Apache Axis2}
Axis2 to kontener webserwisów odpowiadaj¹cy za odbieranie zdalnych wywo³añ
procedur i~przekazywanie ich do mog¹cych je wykonaæ obiektów.
Zwalnia programistê z koniecznoœci samodzielnego przetwarzania XML w
¿¹daniach, umo¿liwia te¿ automatyczn¹ serializacjê i~deserializacjê obiektów
Javowych. 
\index{XSLT}
\paragraph{Transformata XSLT}
Elementem wspomagaj¹cym w systemie jest transformata XSLT, wykonywana na
odpowiedziach, przesy³anych do urz¹dzenia mobilnego. Jej celem jest utworzenie
widoku dla urz¹dzenia mobilnego w sposób niezale¿ny od generowanej odpowiedzi.
W wyniku wywo³ania procedury generuj¹cej ekran tworzony jest XML zawieraj¹cy
podstawowe informacje, a nastêpnie przetwarzany jest on w opisany sposób,
dziêki czemu odpowiedŸ mo¿na dowolnie modyfikowaæ bez zmiany kodu aplikacji.

