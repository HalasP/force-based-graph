\chapter{Mechanizmy integracyjne w technologiach mobilnych}
\section{Szybka droga do mobilnoœci ?}

Na wstêpie dyskusji o mobilnej czêœci platformy integracyjnej zwrócimy uwagê na
dostêpne na rynku urz¹dzenia, które posiadaj¹ preinstalowane systemy operacyjne
pozwalaj¹ce na dodawanie nie przewidzianych przez twórców zewnêtrznych
rozwi¹zañ. Tego typu systemy operacyjne musz¹ siê charakteryzowaæ udostêpnieniem
na zewn¹trz, do instalowanych przez nas aplikacji, pewnego API pozwalaj¹cego na
realizacjê podstawowych us³ug, takich jak transfer danych czy ich sk³adowanie w
pamiêci urz¹dzenia. Na chwile obecn¹ (drugi kwarta³ 2008 roku) na rynku dostêpne
s¹ urz¹dzenia dzia³aj¹ce w oparciu wymienione poni¿ej platformy mobilne :
\begin{itemize} 
\item{WMD - Windows Media Devices oparte o system operacyjny Windows Mobile
opracowany przez firmê Microsoft}
\item{Symbian - platforma spotykana g³ównie na
smartfonach oferowanych przez firmy takie jak Nokia czy Samsung}
\item{Blackberry - marka wypromowana prze firmê Research in Motion, oferuje
urz¹dzenia z preistalowanym systemem operacyjnym opartym na wirtualnej maszynie Java}
\item{Android - system operacyjny oparty na Linuxie, mo¿liwy do rozbudowywania
g³ównie przez aplikacje J2ME (w obecnej chwili system jest w fazie testów) }
\item{pozosta³e autorskie systemy operacyjne, udostêpniaj¹ce standardow¹
maszynê wirtualn¹ Java}
\end{itemize}

Po dok³adnym przyjrzeniu siê powy¿szym platformom nasuwa siê jeden stanowczy
wniosek - poza platformami opartymi na J2ME, wykonanie jednej, spójnej
aplikacji spe³niaj¹cej za³o¿enia interoperacyjnoœci jest praktycznie niemo¿liwe. Jedynym
rozwi¹zaniem jest przygotowanie kilku instancji tej samej aplikacji, które
niestety nie bêd¹ mia³y ze sob¹ niczego wspólnego poza przyjêtymi za³o¿eniami
dotycz¹cymi podstawowej funkcjonalnoœci. Wynika to miêdzy innymi z tego, ¿e
ka¿da platforma oferuje inne mo¿liwoœci i przy okazji wprowadza inne ograniczenia. Co wiêcej tego
typu ró¿nicowanie wystêpuje równie¿ w obrêbie samych platform. Na przyk³ad J2ME
posiada profile zwi¹zane na sta³e z modelami urz¹dzeñ, które decyduj¹ o tym,
jakie funkcjonalnoœci dostêpne s¹ dla programów. Wskazane powy¿ej ograniczenia
techniczne wymuszaj¹ przy próbie wejœcia na rynek aplikacji mobilnych, ju¿ na
etapie planowania produktu, wybranie konkretnej platformy docelowej, na jakiej
oferowane bêdzie nasze rozwi¹zanie. Wraz z sukcesem rozwi¹zania, mo¿liwa bêdzie
dalsza ekspansja na pozosta³e platformy. Przed t¹ ostateczn¹ ewaluacj¹ wartoœci
pomys³u na produkt, jest bardzo ryzykownym podjêcie próby równoleg³ego
wprowadzenia go na ró¿nych, niekompatybilnych platformach. Zwiêksza to znacznie
próg wejœcia oraz utrudnia poprawn¹ kontrolê nad stopniem dojrza³oœci produktu.
Co wiêcej przy s³abym zarz¹dzaniu funkcjonalnoœciami mo¿e wyst¹piæ problem
powstania ró¿nic funkcjonalnych pomiêdzy ró¿nymi wersjami naszej aplikacji. Tego
typu problemy wp³yn¹ w sposób bezpoœredni na postrzeganie naszego produktu przez klientów, w
szczególnoœci gdy bêdziemy mieli do czynienia z korporacjami, w obrêbie których
stosowane s¹ ró¿ne rozwi¹zania mobilne. W wypadku naszego systemu integracyjnego
naturalnym wyborem bêdzie J2ME. Na chwilê obecn¹ jest jedynym standardem, który
daje jakiekolwiek nadzieje na uzyskanie dominacji na rynku. Co wiêcej platforma
Blackberry, która jest stworzona w³aœnie w oparciu o ten standard jest jedn¹ z
najbardziej popularnych w firmach, które chc¹ podj¹æ dzia³ania maj¹ce na celu
umobilnienie wystêpuj¹cych w ich obrêbie procesów biznesowych.

\section{Jak siê do tego zabraæ ?}

W momencie gdy mamy ustalon¹ ju¿ platformê docelow¹ (J2ME) musimy przyjrzeæ siê
temu co nam oferuje. Z punktu widzenia integracji najwa¿niejsze dla nas s¹ dwie
cechy : 
\begin{itemize}
\item{mo¿liwoœæ do trwa³ego przechowywania danych,}
\item{zdolnoœci do komunikacji z systemami zewnêtrznymi.}\end{itemize}

Pod pojêciem trwa³ego przechowywania danych kryje siê niewra¿liwoœæ danych na
przerwy w dostawie energii do urz¹dzenia lub ewentualne przypadkowe restarty.
Platforma J2ME oferuje nam tu standardowe rozwi¹zanie w postaci Persistance API
daj¹ce dostêp do tzw. Record Store-ów pozwalaj¹cych zapisywaæ dowolne dane w
pamiêci trwa³ej urz¹dzenia. Ka¿de urz¹dzenie posiadaj¹ce maszynê wirtualn¹ java
musi obowi¹zkowo posiadaæ tego typu pamiêæ. API to jest bardzo prymitywne i nie
pozwala na przechowywanie danych w sposób relacyjny, czy nawet nie pozwala na
serializowanie obiektów. Jednak przy zastosowaniu odpowiedniego poziomu
abstrakcji, poprzez opakowanie tych interfejsów w odpowiednie klasy jesteœmy w
stanie uzyskaæ wygodny sposób na przechowywanie danych. Wymaga to niestety sporo
dodatkowej pracy. Przy analizowaniu zdolnoœci do komunikacji sprawy siê znacznie
komplikuj¹. Istnieje kilka, doœæ znacz¹co ró¿nych metod komunikacji, które mo¿emy
wykorzystaæ do synchronizacji danych z naszymi zewnêtrznymi Ÿród³ami. U podstaw
komunikacji le¿¹ takie protoko³y takie jak Direct TCP czy Http, które pozwalaj¹
na wymianê czystych nie przetworzonych danych binarnych, czy te¿
tekstowych. Mo¿na je wykorzystaæ w sposób bezpoœredni, jednak jest to
niezwykle trudne i niewygodne. Z pomoc¹ przychodz¹ nam protoko³y komunikacyjne wy¿szego poziomu. Ich
wad¹ jest to, ¿e czêsto nie s¹ elementem standardowego wyposa¿enia urz¹dzeñ, na
które bêdziemy pisali nasz¹ aplikacjê. Nie jest to jednak problemem, ze wzglêdu
na to, ¿e u podstaw tych¿e protoko³ów wy¿szego poziomu zawsze le¿y protokó³
podstawowy, który jest dostêpny bezpoœrednio w standardowej bibliotece. Co wiêcej
istniej¹ dziesi¹tki darmowych implementacji protoko³ów wy¿szego poziomu, które
przy zerowym niemal koszcie, mog¹ zostaæ zaadoptowane do naszych potrzeb. Poni¿ej
przedstawimy krótki przegl¹d rozwi¹zañ wysokiego poziomu, które pozwalaj¹ na
wygodn¹ i ³atw¹ do przeœledzenia komunikacjê z systemami zewnêtrznymi.
Istniej¹ cztery podstawowe sposoby, na które mo¿na zorganizowaæ wysokopoziomow¹
komunikacjê pomiêdzy urz¹dzeniem mobilnym a Ÿród³em danych :
\begin{itemize}
  \item {Protokó³ binarny - najbardziej skomplikowana forma komunikacji, wymaga
  zaprojektowania w³asnego protoko³u, a wiêc jest to metoda najbardziej podatna
  na b³edy programisty/projektanta.}
  \item {RPC - wykorzystanie narzêdzi do tworzenia standardowej komunikacji
  opartej o zdalne wywo³ywanie procedur, du¿o prostsze i odporniejsze na b³edy
  ni¿ poprzednia metoda, jednak wymaga bardzo bliskiego zwi¹zania serwera z
  klientem, co zmniejsza interoperacyjnoœæ rozwi¹zania.}
  \item {Web Services - bardzo popularna metoda pozwalaj¹ca na zbudowanie
  komunikacji pomiêdzy dowolnymi systemami w oparciu o standaryzowane,
  niezale¿ne od koñcowych systemów komunikaty XML. Budowa aplikacji w oparciu o
  Web Servces jest bardzo prosta i czêœciowo zautomatyzowana, jeœli zastosujemy
  odpowiednie frameworki. Najwiêksza zalet¹ jest tu ca³kowita
  interoperacyjnoœæ. Rozwi¹zanie to posiada niestety równie¿ wady w postaci
  zwiêkszonego ruchu w sieci oraz zwiêkszenia wymagañ wobec sprzêtu, na którym
  je wykorzystujemy.}
  \item {JMS - wprowadzenie elementu poœrednicz¹cego pomiêdzy urz¹dzeniem a
  Ÿród³em danych. Komunikacja polega na przesy³aniu wiadomoœci, które w razie
awarii jednego z sytemów mog¹ zostaæ przechowane na kolejce komunikatów, która
znajduje siê na systemie poœrednicz¹cym w komunikacji.}
\end{itemize}
\begin{figure}
\centering
\includegraphics[width=\textwidth]{schemes.png}
{Metody komunikacji}
\end{figure}
Z powy¿szego zestawinia mo¿na wyró¿niæ dwie technologie - Web Services oraz
JMS. Obie pozwalaj¹ na wysok¹ interoperacyjnoœæ rozwi¹zania, co w sytuacji gdy
mamy przed sob¹ perspektywê implementacji naszego rozwi¹zania na dziesi¹tkach
typów urz¹dzeñ jest kluczowym zagadnieniem do rozpatrzenia. Wybór pomiêdzy nimi
sprowadza siê do ustalenia czy niezbêdna dla naszego projektu jest obecnoœæ
systemu poœrednicz¹cego, który jest w stanie zwiêkszyæ niezawodnoœæ
komunikacji. Czynnikiem decyducj¹cym tu jest iloœæ Ÿróde³ danych oraz sposób
ich wykorzystywania przez u¿ytkowników. Jeœli okaza³oby siê, ¿e przez system
bêdzie przechodzi³o du¿o komunikatów, które bêda mog³y doprowadziæ do
przeci¹¿enia systemów Ÿród³owych, element poœrednicz¹cy buforuj¹cy komunikaty
mo¿e okazaæ siê niezbêdny. Jednak w wypadku gdy ka¿dy u¿ytkownik bêdzie
korzysta³ z danych, które dostêpne s¹ przez niezale¿ne kana³y - czyli systemy
Ÿród³owe nie bêd¹ posiada³y w¹skiego gard³a, nale¿a³oby rozwa¿yæ skorzystanie z
web services, które s¹ znacznie tañszym rozwi¹zaniem ni¿ JMS. Wynika to z tego,
¿e wiêkszoœæ implementacji WS dostêpna jest za darmo w postaci Open Source lub
jest ju¿ wbudowana w systemy Ÿród³owe, a co wiêcej nie wymaga dodatkowego
serwera buforuj¹cego komunikaty.

%%\section{JORAN}

%%\section{JXTA4J2ME}

%%\section{IBM MQ Everyplace}

%%\section{AshnaMQ 2.0}


%%\section{Webservices}
%%http://developers.sun.com/mobility/apis/articles/wsa/
